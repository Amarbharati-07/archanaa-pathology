import { db } from "./db";
import { tests, admins, healthPackages } from "@shared/schema";
import bcrypt from "bcrypt";

// Comprehensive All-India Standard Lab Tests Directory
const seedTests = [
  // ==================== HEMATOLOGY ====================
  {
    name: "Complete Blood Count (CBC)",
    code: "CBC",
    category: "Hematology",
    price: "450",
    duration: "24 hours",
    description: "Comprehensive blood test that evaluates overall health and detects a wide range of disorders including anemia, infection, and blood diseases.",
    sampleType: "Whole Blood (EDTA)",
    fastingRequired: false,
    fastingHours: null,
    method: "Automated Cell Counter",
    parameters: [
      { name: "Hemoglobin", unit: "g/dL", normalRange: "12-16 (F), 13-17 (M)", paramCode: "HGB" },
      { name: "RBC Count", unit: "million/mcL", normalRange: "4.0-5.5 (F), 4.5-6.0 (M)", paramCode: "RBC" },
      { name: "WBC Count", unit: "cells/mcL", normalRange: "4500-11000", paramCode: "WBC" },
      { name: "Platelets", unit: "cells/mcL", normalRange: "150000-400000", paramCode: "PLT" },
      { name: "Hematocrit (HCT/PCV)", unit: "%", normalRange: "36-46 (F), 40-54 (M)", paramCode: "HCT" },
      { name: "MCV", unit: "fL", normalRange: "80-100", paramCode: "MCV" },
      { name: "MCH", unit: "pg", normalRange: "27-33", paramCode: "MCH" },
      { name: "MCHC", unit: "g/dL", normalRange: "32-36", paramCode: "MCHC" },
      { name: "RDW-CV", unit: "%", normalRange: "11.5-14.5", paramCode: "RDWCV" },
      { name: "Neutrophils", unit: "%", normalRange: "40-70", paramCode: "NEUT" },
      { name: "Lymphocytes", unit: "%", normalRange: "20-40", paramCode: "LYMPH" },
      { name: "Monocytes", unit: "%", normalRange: "2-8", paramCode: "MONO" },
      { name: "Eosinophils", unit: "%", normalRange: "1-4", paramCode: "EOS" },
      { name: "Basophils", unit: "%", normalRange: "0-1", paramCode: "BASO" },
    ],
  },
  {
    name: "Erythrocyte Sedimentation Rate (ESR)",
    code: "ESR",
    category: "Hematology",
    price: "150",
    duration: "4 hours",
    description: "Measures the rate at which red blood cells settle in a tube. Elevated ESR indicates inflammation in the body.",
    sampleType: "Whole Blood (EDTA)",
    fastingRequired: false,
    fastingHours: null,
    method: "Westergren Method",
    parameters: [
      { name: "ESR", unit: "mm/hr", normalRange: "0-15 (M), 0-20 (F)", paramCode: "ESR" },
    ],
  },
  {
    name: "Peripheral Blood Smear",
    code: "PBS",
    category: "Hematology",
    price: "300",
    duration: "24 hours",
    description: "Microscopic examination of blood cells to evaluate their shape, size, and appearance.",
    sampleType: "Whole Blood (EDTA)",
    fastingRequired: false,
    fastingHours: null,
    method: "Microscopy (Leishman Stain)",
    parameters: [
      { name: "RBC Morphology", unit: "", normalRange: "Normocytic Normochromic", paramCode: "RBCM" },
      { name: "WBC Morphology", unit: "", normalRange: "Normal", paramCode: "WBCM" },
      { name: "Platelet Morphology", unit: "", normalRange: "Adequate", paramCode: "PLTM" },
      { name: "Parasites", unit: "", normalRange: "Not Seen", paramCode: "PARA" },
    ],
  },
  {
    name: "Blood Group & Rh Typing",
    code: "BGRH",
    category: "Hematology",
    price: "200",
    duration: "4 hours",
    description: "Determines blood group (A, B, AB, O) and Rh factor (positive or negative).",
    sampleType: "Whole Blood (EDTA)",
    fastingRequired: false,
    fastingHours: null,
    method: "Slide Agglutination",
    parameters: [
      { name: "Blood Group", unit: "", normalRange: "A/B/AB/O", paramCode: "BG" },
      { name: "Rh Factor", unit: "", normalRange: "Positive/Negative", paramCode: "RH" },
    ],
  },
  {
    name: "Reticulocyte Count",
    code: "RETIC",
    category: "Hematology",
    price: "350",
    duration: "24 hours",
    description: "Measures young red blood cells to assess bone marrow function and response to anemia treatment.",
    sampleType: "Whole Blood (EDTA)",
    fastingRequired: false,
    fastingHours: null,
    method: "Automated/Manual Count",
    parameters: [
      { name: "Reticulocyte Count", unit: "%", normalRange: "0.5-2.5", paramCode: "RETIC" },
      { name: "Absolute Reticulocyte Count", unit: "cells/mcL", normalRange: "25000-125000", paramCode: "ARC" },
    ],
  },

  // ==================== DIABETES TESTS ====================
  {
    name: "Blood Sugar Fasting",
    code: "BSF",
    category: "Diabetes",
    price: "80",
    duration: "4 hours",
    description: "Measures blood glucose levels after an overnight fast (8-12 hours). Primary screening test for diabetes.",
    sampleType: "Plasma (Fluoride)",
    fastingRequired: true,
    fastingHours: 10,
    method: "Hexokinase/GOD-POD",
    parameters: [
      { name: "Fasting Blood Glucose", unit: "mg/dL", normalRange: "70-100", paramCode: "FBG" },
    ],
  },
  {
    name: "Blood Sugar PP (Postprandial)",
    code: "BSPP",
    category: "Diabetes",
    price: "80",
    duration: "4 hours",
    description: "Measures blood glucose levels 2 hours after eating. Helps assess how body handles glucose after meals.",
    sampleType: "Plasma (Fluoride)",
    fastingRequired: false,
    fastingHours: null,
    method: "Hexokinase/GOD-POD",
    parameters: [
      { name: "Postprandial Blood Glucose", unit: "mg/dL", normalRange: "<140", paramCode: "PPBG" },
    ],
  },
  {
    name: "Blood Sugar Random",
    code: "BSR",
    category: "Diabetes",
    price: "80",
    duration: "4 hours",
    description: "Measures blood glucose at any time of day, regardless of when you last ate.",
    sampleType: "Plasma (Fluoride)",
    fastingRequired: false,
    fastingHours: null,
    method: "Hexokinase/GOD-POD",
    parameters: [
      { name: "Random Blood Glucose", unit: "mg/dL", normalRange: "<200", paramCode: "RBG" },
    ],
  },
  {
    name: "HbA1c (Glycated Hemoglobin)",
    code: "HBA1C",
    category: "Diabetes",
    price: "550",
    duration: "24 hours",
    description: "Measures average blood sugar control over the past 2-3 months. Gold standard for diabetes monitoring.",
    sampleType: "Whole Blood (EDTA)",
    fastingRequired: false,
    fastingHours: null,
    method: "HPLC/Immunoturbidimetry",
    parameters: [
      { name: "HbA1c", unit: "%", normalRange: "<5.7 (Normal), 5.7-6.4 (Prediabetes), ≥6.5 (Diabetes)", paramCode: "A1C" },
      { name: "Estimated Average Glucose", unit: "mg/dL", normalRange: "<117", paramCode: "EAG" },
    ],
  },
  {
    name: "Fasting Insulin",
    code: "FINS",
    category: "Diabetes",
    price: "800",
    duration: "48 hours",
    description: "Measures insulin levels in fasting state. Helps assess insulin resistance and beta cell function.",
    sampleType: "Serum",
    fastingRequired: true,
    fastingHours: 10,
    method: "CLIA/ECLIA",
    parameters: [
      { name: "Fasting Insulin", unit: "µIU/mL", normalRange: "2.6-24.9", paramCode: "FINS" },
    ],
  },

  // ==================== LIVER PROFILE (LFT) ====================
  {
    name: "Liver Function Test (LFT)",
    code: "LFT",
    category: "Liver Profile",
    price: "650",
    duration: "24 hours",
    description: "Comprehensive panel to assess liver health, function, and detect liver diseases.",
    sampleType: "Serum",
    fastingRequired: true,
    fastingHours: 10,
    method: "Colorimetric/Kinetic",
    parameters: [
      { name: "Bilirubin Total", unit: "mg/dL", normalRange: "0.1-1.2", paramCode: "TBIL" },
      { name: "Bilirubin Direct", unit: "mg/dL", normalRange: "0-0.3", paramCode: "DBIL" },
      { name: "Bilirubin Indirect", unit: "mg/dL", normalRange: "0.1-0.9", paramCode: "IBIL" },
      { name: "SGOT (AST)", unit: "U/L", normalRange: "10-40", paramCode: "AST" },
      { name: "SGPT (ALT)", unit: "U/L", normalRange: "7-56", paramCode: "ALT" },
      { name: "Alkaline Phosphatase (ALP)", unit: "U/L", normalRange: "44-147", paramCode: "ALP" },
      { name: "Gamma GT (GGT)", unit: "U/L", normalRange: "9-48 (M), 9-36 (F)", paramCode: "GGT" },
      { name: "Total Protein", unit: "g/dL", normalRange: "6.0-8.3", paramCode: "TP" },
      { name: "Albumin", unit: "g/dL", normalRange: "3.5-5.0", paramCode: "ALB" },
      { name: "Globulin", unit: "g/dL", normalRange: "2.0-3.5", paramCode: "GLOB" },
      { name: "A/G Ratio", unit: "", normalRange: "1.0-2.5", paramCode: "AGR" },
    ],
  },

  // ==================== KIDNEY PROFILE (KFT) ====================
  {
    name: "Kidney Function Test (KFT)",
    code: "KFT",
    category: "Kidney Profile",
    price: "550",
    duration: "24 hours",
    description: "Evaluates kidney health and function. Essential for detecting kidney diseases and monitoring kidney function.",
    sampleType: "Serum",
    fastingRequired: true,
    fastingHours: 10,
    method: "Colorimetric/Enzymatic",
    parameters: [
      { name: "Blood Urea", unit: "mg/dL", normalRange: "15-45", paramCode: "UREA" },
      { name: "Blood Urea Nitrogen (BUN)", unit: "mg/dL", normalRange: "7-20", paramCode: "BUN" },
      { name: "Creatinine", unit: "mg/dL", normalRange: "0.6-1.2 (M), 0.5-1.1 (F)", paramCode: "CREAT" },
      { name: "Uric Acid", unit: "mg/dL", normalRange: "3.5-7.2 (M), 2.6-6.0 (F)", paramCode: "UA" },
      { name: "eGFR", unit: "mL/min/1.73m²", normalRange: ">90", paramCode: "EGFR" },
      { name: "BUN/Creatinine Ratio", unit: "", normalRange: "10-20", paramCode: "BCR" },
    ],
  },
  {
    name: "Electrolyte Panel",
    code: "ELEC",
    category: "Kidney Profile",
    price: "450",
    duration: "24 hours",
    description: "Measures essential electrolytes in blood. Important for kidney function and fluid balance assessment.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "Ion Selective Electrode (ISE)",
    parameters: [
      { name: "Sodium", unit: "mEq/L", normalRange: "136-145", paramCode: "NA" },
      { name: "Potassium", unit: "mEq/L", normalRange: "3.5-5.0", paramCode: "K" },
      { name: "Chloride", unit: "mEq/L", normalRange: "98-106", paramCode: "CL" },
      { name: "Bicarbonate", unit: "mEq/L", normalRange: "22-29", paramCode: "HCO3" },
    ],
  },

  // ==================== LIPID PROFILE ====================
  {
    name: "Lipid Profile",
    code: "LIPID",
    category: "Lipid Profile",
    price: "500",
    duration: "24 hours",
    description: "Measures cholesterol and triglyceride levels to assess cardiovascular health and heart disease risk.",
    sampleType: "Serum",
    fastingRequired: true,
    fastingHours: 12,
    method: "Enzymatic Colorimetric",
    parameters: [
      { name: "Total Cholesterol", unit: "mg/dL", normalRange: "<200 (Desirable)", paramCode: "TC" },
      { name: "HDL Cholesterol", unit: "mg/dL", normalRange: ">40 (M), >50 (F)", paramCode: "HDL" },
      { name: "LDL Cholesterol", unit: "mg/dL", normalRange: "<100 (Optimal)", paramCode: "LDL" },
      { name: "VLDL Cholesterol", unit: "mg/dL", normalRange: "<30", paramCode: "VLDL" },
      { name: "Triglycerides", unit: "mg/dL", normalRange: "<150", paramCode: "TG" },
      { name: "Total Cholesterol/HDL Ratio", unit: "", normalRange: "<5", paramCode: "TCHDL" },
      { name: "LDL/HDL Ratio", unit: "", normalRange: "<3", paramCode: "LDLHDL" },
      { name: "Non-HDL Cholesterol", unit: "mg/dL", normalRange: "<130", paramCode: "NONHDL" },
    ],
  },
  {
    name: "Apolipoprotein A1",
    code: "APOA1",
    category: "Lipid Profile",
    price: "900",
    duration: "48 hours",
    description: "Primary protein component of HDL cholesterol. Low levels indicate increased cardiovascular risk.",
    sampleType: "Serum",
    fastingRequired: true,
    fastingHours: 12,
    method: "Immunoturbidimetry",
    parameters: [
      { name: "Apolipoprotein A1", unit: "mg/dL", normalRange: "104-202 (M), 108-225 (F)", paramCode: "APOA1" },
    ],
  },
  {
    name: "Apolipoprotein B",
    code: "APOB",
    category: "Lipid Profile",
    price: "900",
    duration: "48 hours",
    description: "Primary protein of LDL cholesterol. Elevated levels indicate increased cardiovascular risk.",
    sampleType: "Serum",
    fastingRequired: true,
    fastingHours: 12,
    method: "Immunoturbidimetry",
    parameters: [
      { name: "Apolipoprotein B", unit: "mg/dL", normalRange: "66-133 (M), 60-117 (F)", paramCode: "APOB" },
    ],
  },
  {
    name: "Lipoprotein (a)",
    code: "LPA",
    category: "Lipid Profile",
    price: "1200",
    duration: "48 hours",
    description: "Independent genetic risk factor for cardiovascular disease.",
    sampleType: "Serum",
    fastingRequired: true,
    fastingHours: 12,
    method: "Immunoturbidimetry",
    parameters: [
      { name: "Lipoprotein (a)", unit: "mg/dL", normalRange: "<30", paramCode: "LPA" },
    ],
  },

  // ==================== THYROID PROFILE ====================
  {
    name: "Thyroid Profile (T3, T4, TSH)",
    code: "THYROID",
    category: "Thyroid",
    price: "700",
    duration: "24 hours",
    description: "Comprehensive assessment of thyroid function. Detects hyperthyroidism, hypothyroidism, and other thyroid disorders.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "CLIA/ECLIA",
    parameters: [
      { name: "TSH", unit: "µIU/mL", normalRange: "0.4-4.0", paramCode: "TSH" },
      { name: "Total T3", unit: "ng/dL", normalRange: "80-200", paramCode: "T3" },
      { name: "Total T4", unit: "µg/dL", normalRange: "5.0-12.0", paramCode: "T4" },
    ],
  },
  {
    name: "Free T3",
    code: "FT3",
    category: "Thyroid",
    price: "400",
    duration: "24 hours",
    description: "Measures unbound, active form of T3. More accurate than total T3 in certain conditions.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "CLIA/ECLIA",
    parameters: [
      { name: "Free T3", unit: "pg/mL", normalRange: "2.3-4.2", paramCode: "FT3" },
    ],
  },
  {
    name: "Free T4",
    code: "FT4",
    category: "Thyroid",
    price: "400",
    duration: "24 hours",
    description: "Measures unbound, active form of T4. More accurate than total T4 in certain conditions.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "CLIA/ECLIA",
    parameters: [
      { name: "Free T4", unit: "ng/dL", normalRange: "0.8-1.8", paramCode: "FT4" },
    ],
  },
  {
    name: "Anti-TPO Antibodies",
    code: "TPO",
    category: "Thyroid",
    price: "800",
    duration: "48 hours",
    description: "Detects antibodies against thyroid peroxidase. Elevated in autoimmune thyroid diseases like Hashimoto's.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "CLIA/ECLIA",
    parameters: [
      { name: "Anti-TPO Antibodies", unit: "IU/mL", normalRange: "<34", paramCode: "ATPO" },
    ],
  },
  {
    name: "Anti-Thyroglobulin Antibodies",
    code: "ATG",
    category: "Thyroid",
    price: "800",
    duration: "48 hours",
    description: "Detects antibodies against thyroglobulin. Elevated in autoimmune thyroid diseases.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "CLIA/ECLIA",
    parameters: [
      { name: "Anti-Thyroglobulin Antibodies", unit: "IU/mL", normalRange: "<115", paramCode: "ATG" },
    ],
  },

  // ==================== VITAMINS & MINERALS ====================
  {
    name: "Vitamin D (25-OH)",
    code: "VITD",
    category: "Vitamins",
    price: "1200",
    duration: "48 hours",
    description: "Measures 25-hydroxyvitamin D levels. Essential for bone health and immune function.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "CLIA/ECLIA",
    parameters: [
      { name: "Vitamin D (25-OH)", unit: "ng/mL", normalRange: "30-100 (Sufficient), 20-29 (Insufficient), <20 (Deficient)", paramCode: "VITD" },
    ],
  },
  {
    name: "Vitamin B12",
    code: "VITB12",
    category: "Vitamins",
    price: "750",
    duration: "48 hours",
    description: "Measures cobalamin levels. Essential for nerve function, red blood cell formation, and DNA synthesis.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "CLIA/ECLIA",
    parameters: [
      { name: "Vitamin B12", unit: "pg/mL", normalRange: "200-900", paramCode: "B12" },
    ],
  },
  {
    name: "Folate (Folic Acid)",
    code: "FOLATE",
    category: "Vitamins",
    price: "650",
    duration: "48 hours",
    description: "Measures folate levels. Essential for DNA synthesis and red blood cell formation.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "CLIA/ECLIA",
    parameters: [
      { name: "Serum Folate", unit: "ng/mL", normalRange: "3.0-17.0", paramCode: "FOL" },
    ],
  },
  {
    name: "Iron Studies",
    code: "IRON",
    category: "Vitamins",
    price: "600",
    duration: "24 hours",
    description: "Comprehensive iron assessment including serum iron, TIBC, and transferrin saturation.",
    sampleType: "Serum",
    fastingRequired: true,
    fastingHours: 10,
    method: "Colorimetric",
    parameters: [
      { name: "Serum Iron", unit: "µg/dL", normalRange: "60-170 (M), 50-150 (F)", paramCode: "FE" },
      { name: "TIBC", unit: "µg/dL", normalRange: "250-400", paramCode: "TIBC" },
      { name: "Transferrin Saturation", unit: "%", normalRange: "20-50", paramCode: "TSAT" },
    ],
  },
  {
    name: "Ferritin",
    code: "FERR",
    category: "Vitamins",
    price: "550",
    duration: "24 hours",
    description: "Measures iron stores in the body. Best indicator of iron deficiency anemia.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "CLIA/ECLIA",
    parameters: [
      { name: "Ferritin", unit: "ng/mL", normalRange: "12-300 (M), 12-150 (F)", paramCode: "FERR" },
    ],
  },
  {
    name: "Calcium",
    code: "CA",
    category: "Vitamins",
    price: "150",
    duration: "24 hours",
    description: "Measures calcium levels. Essential for bones, muscles, nerves, and heart function.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "Colorimetric",
    parameters: [
      { name: "Calcium", unit: "mg/dL", normalRange: "8.5-10.5", paramCode: "CA" },
    ],
  },
  {
    name: "Phosphorus",
    code: "PHOS",
    category: "Vitamins",
    price: "150",
    duration: "24 hours",
    description: "Measures phosphorus levels. Important for bones, energy production, and kidney function.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "Colorimetric",
    parameters: [
      { name: "Phosphorus", unit: "mg/dL", normalRange: "2.5-4.5", paramCode: "PHOS" },
    ],
  },
  {
    name: "Magnesium",
    code: "MG",
    category: "Vitamins",
    price: "200",
    duration: "24 hours",
    description: "Measures magnesium levels. Essential for muscle function, nerve function, and heart rhythm.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "Colorimetric",
    parameters: [
      { name: "Magnesium", unit: "mg/dL", normalRange: "1.7-2.4", paramCode: "MG" },
    ],
  },

  // ==================== CARDIAC MARKERS ====================
  {
    name: "Troponin I",
    code: "TROPI",
    category: "Cardiac",
    price: "1200",
    duration: "4 hours",
    description: "Highly sensitive marker for heart muscle damage. Primary test for diagnosing heart attack.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "CLIA/ECLIA",
    parameters: [
      { name: "Troponin I", unit: "ng/mL", normalRange: "<0.04", paramCode: "TROPI" },
    ],
  },
  {
    name: "CK-MB",
    code: "CKMB",
    category: "Cardiac",
    price: "600",
    duration: "4 hours",
    description: "Cardiac-specific creatine kinase. Used to diagnose heart attack and monitor heart damage.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "CLIA/Immunoinhibition",
    parameters: [
      { name: "CK-MB", unit: "U/L", normalRange: "<25", paramCode: "CKMB" },
    ],
  },
  {
    name: "NT-proBNP",
    code: "NTPROBNP",
    category: "Cardiac",
    price: "2500",
    duration: "48 hours",
    description: "Marker for heart failure. Elevated levels indicate heart strain or failure.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "CLIA/ECLIA",
    parameters: [
      { name: "NT-proBNP", unit: "pg/mL", normalRange: "<125 (Age <75), <450 (Age ≥75)", paramCode: "NTBNP" },
    ],
  },
  {
    name: "Homocysteine",
    code: "HOMO",
    category: "Cardiac",
    price: "1500",
    duration: "48 hours",
    description: "Elevated levels are a risk factor for cardiovascular disease and stroke.",
    sampleType: "Serum",
    fastingRequired: true,
    fastingHours: 10,
    method: "CLIA/ECLIA",
    parameters: [
      { name: "Homocysteine", unit: "µmol/L", normalRange: "5-15", paramCode: "HCY" },
    ],
  },
  {
    name: "hs-CRP (High Sensitivity CRP)",
    code: "HSCRP",
    category: "Cardiac",
    price: "800",
    duration: "24 hours",
    description: "Marker for cardiovascular inflammation. Helps assess heart disease risk.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "Immunoturbidimetry",
    parameters: [
      { name: "hs-CRP", unit: "mg/L", normalRange: "<1 (Low Risk), 1-3 (Average), >3 (High Risk)", paramCode: "HSCRP" },
    ],
  },

  // ==================== INFECTION PANELS ====================
  {
    name: "C-Reactive Protein (CRP)",
    code: "CRP",
    category: "Infection",
    price: "400",
    duration: "24 hours",
    description: "Marker for inflammation and infection. Elevated in bacterial infections and inflammatory conditions.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "Immunoturbidimetry",
    parameters: [
      { name: "CRP", unit: "mg/L", normalRange: "<6", paramCode: "CRP" },
    ],
  },
  {
    name: "Procalcitonin",
    code: "PCT",
    category: "Infection",
    price: "1800",
    duration: "24 hours",
    description: "Specific marker for bacterial sepsis. Helps differentiate bacterial from viral infections.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "CLIA/ECLIA",
    parameters: [
      { name: "Procalcitonin", unit: "ng/mL", normalRange: "<0.5", paramCode: "PCT" },
    ],
  },
  {
    name: "Dengue NS1 Antigen",
    code: "DENNS1",
    category: "Infection",
    price: "800",
    duration: "4 hours",
    description: "Early detection of dengue infection. Positive in first 5 days of fever.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "ELISA/Rapid Card",
    parameters: [
      { name: "Dengue NS1 Antigen", unit: "", normalRange: "Negative", paramCode: "DNS1" },
    ],
  },
  {
    name: "Dengue IgG/IgM",
    code: "DENIGG",
    category: "Infection",
    price: "700",
    duration: "4 hours",
    description: "Detects dengue antibodies. IgM indicates recent infection, IgG indicates past infection or secondary infection.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "ELISA/Rapid Card",
    parameters: [
      { name: "Dengue IgM", unit: "", normalRange: "Negative", paramCode: "DIGM" },
      { name: "Dengue IgG", unit: "", normalRange: "Negative", paramCode: "DIGG" },
    ],
  },
  {
    name: "Malaria Antigen (Rapid)",
    code: "MALARIA",
    category: "Infection",
    price: "400",
    duration: "2 hours",
    description: "Rapid detection of malaria parasites. Detects P. falciparum and P. vivax.",
    sampleType: "Whole Blood",
    fastingRequired: false,
    fastingHours: null,
    method: "Rapid Immunochromatography",
    parameters: [
      { name: "P. falciparum", unit: "", normalRange: "Negative", paramCode: "PF" },
      { name: "P. vivax", unit: "", normalRange: "Negative", paramCode: "PV" },
    ],
  },
  {
    name: "Typhidot (Typhoid)",
    code: "TYPHOID",
    category: "Infection",
    price: "500",
    duration: "4 hours",
    description: "Rapid detection of typhoid fever caused by Salmonella typhi.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "Rapid Immunochromatography",
    parameters: [
      { name: "Typhoid IgM", unit: "", normalRange: "Negative", paramCode: "TIGM" },
      { name: "Typhoid IgG", unit: "", normalRange: "Negative", paramCode: "TIGG" },
    ],
  },
  {
    name: "Widal Test",
    code: "WIDAL",
    category: "Infection",
    price: "300",
    duration: "4 hours",
    description: "Serological test for typhoid and paratyphoid fever.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "Tube Agglutination",
    parameters: [
      { name: "Salmonella typhi O", unit: "Titer", normalRange: "<1:80", paramCode: "STO" },
      { name: "Salmonella typhi H", unit: "Titer", normalRange: "<1:80", paramCode: "STH" },
      { name: "Salmonella paratyphi AH", unit: "Titer", normalRange: "<1:80", paramCode: "SPAH" },
      { name: "Salmonella paratyphi BH", unit: "Titer", normalRange: "<1:80", paramCode: "SPBH" },
    ],
  },

  // ==================== SEROLOGY ====================
  {
    name: "HIV 1 & 2 Antibodies",
    code: "HIV",
    category: "Serology",
    price: "500",
    duration: "24 hours",
    description: "Screening test for HIV infection. Detects antibodies to HIV-1 and HIV-2.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "ELISA/CLIA",
    parameters: [
      { name: "HIV 1 & 2 Antibodies", unit: "", normalRange: "Non-Reactive", paramCode: "HIV" },
    ],
  },
  {
    name: "Hepatitis B Surface Antigen (HBsAg)",
    code: "HBSAG",
    category: "Serology",
    price: "400",
    duration: "24 hours",
    description: "Screening test for hepatitis B infection. Positive indicates current infection.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "ELISA/CLIA",
    parameters: [
      { name: "HBsAg", unit: "", normalRange: "Negative", paramCode: "HBSAG" },
    ],
  },
  {
    name: "Anti-HCV (Hepatitis C)",
    code: "HCV",
    category: "Serology",
    price: "600",
    duration: "24 hours",
    description: "Screening test for hepatitis C infection. Detects antibodies to HCV.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "ELISA/CLIA",
    parameters: [
      { name: "Anti-HCV", unit: "", normalRange: "Negative", paramCode: "HCV" },
    ],
  },
  {
    name: "VDRL (Syphilis Screening)",
    code: "VDRL",
    category: "Serology",
    price: "250",
    duration: "24 hours",
    description: "Screening test for syphilis infection.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "Flocculation",
    parameters: [
      { name: "VDRL", unit: "", normalRange: "Non-Reactive", paramCode: "VDRL" },
    ],
  },
  {
    name: "RA Factor (Rheumatoid Factor)",
    code: "RAF",
    category: "Serology",
    price: "450",
    duration: "24 hours",
    description: "Marker for rheumatoid arthritis and other autoimmune conditions.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "Immunoturbidimetry",
    parameters: [
      { name: "Rheumatoid Factor", unit: "IU/mL", normalRange: "<14", paramCode: "RAF" },
    ],
  },
  {
    name: "ASO Titre",
    code: "ASO",
    category: "Serology",
    price: "400",
    duration: "24 hours",
    description: "Detects recent streptococcal infection. Elevated in rheumatic fever.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "Immunoturbidimetry",
    parameters: [
      { name: "ASO Titre", unit: "IU/mL", normalRange: "<200", paramCode: "ASO" },
    ],
  },
  {
    name: "ANA (Antinuclear Antibodies)",
    code: "ANA",
    category: "Serology",
    price: "1200",
    duration: "48 hours",
    description: "Screening test for autoimmune diseases like SLE, Sjogren's syndrome, etc.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "IFA/ELISA",
    parameters: [
      { name: "ANA", unit: "", normalRange: "Negative", paramCode: "ANA" },
      { name: "ANA Pattern", unit: "", normalRange: "N/A", paramCode: "ANAP" },
    ],
  },

  // ==================== HORMONES ====================
  {
    name: "Testosterone (Total)",
    code: "TEST",
    category: "Hormones",
    price: "800",
    duration: "48 hours",
    description: "Measures total testosterone levels. Important for male reproductive health and female hormone balance.",
    sampleType: "Serum",
    fastingRequired: true,
    fastingHours: 10,
    method: "CLIA/ECLIA",
    parameters: [
      { name: "Total Testosterone", unit: "ng/dL", normalRange: "270-1070 (M), 15-70 (F)", paramCode: "TEST" },
    ],
  },
  {
    name: "Prolactin",
    code: "PRL",
    category: "Hormones",
    price: "600",
    duration: "48 hours",
    description: "Hormone that stimulates breast milk production. Elevated in pituitary disorders.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "CLIA/ECLIA",
    parameters: [
      { name: "Prolactin", unit: "ng/mL", normalRange: "4-15 (M), 4-23 (F)", paramCode: "PRL" },
    ],
  },
  {
    name: "LH (Luteinizing Hormone)",
    code: "LH",
    category: "Hormones",
    price: "550",
    duration: "48 hours",
    description: "Reproductive hormone. Important for fertility assessment in both men and women.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "CLIA/ECLIA",
    parameters: [
      { name: "LH", unit: "mIU/mL", normalRange: "1.5-9.3 (M), Varies by cycle phase (F)", paramCode: "LH" },
    ],
  },
  {
    name: "FSH (Follicle Stimulating Hormone)",
    code: "FSH",
    category: "Hormones",
    price: "550",
    duration: "48 hours",
    description: "Reproductive hormone. Essential for fertility evaluation.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "CLIA/ECLIA",
    parameters: [
      { name: "FSH", unit: "mIU/mL", normalRange: "1.5-12.4 (M), Varies by cycle phase (F)", paramCode: "FSH" },
    ],
  },
  {
    name: "Estradiol (E2)",
    code: "E2",
    category: "Hormones",
    price: "700",
    duration: "48 hours",
    description: "Primary female sex hormone. Important for reproductive health and menopause assessment.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "CLIA/ECLIA",
    parameters: [
      { name: "Estradiol", unit: "pg/mL", normalRange: "Varies by cycle phase (F), 10-40 (M)", paramCode: "E2" },
    ],
  },
  {
    name: "Progesterone",
    code: "PROG",
    category: "Hormones",
    price: "650",
    duration: "48 hours",
    description: "Hormone essential for pregnancy. Used to confirm ovulation and assess fertility.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "CLIA/ECLIA",
    parameters: [
      { name: "Progesterone", unit: "ng/mL", normalRange: "Varies by cycle phase (F), <1 (M)", paramCode: "PROG" },
    ],
  },
  {
    name: "Cortisol (Morning)",
    code: "CORT",
    category: "Hormones",
    price: "700",
    duration: "48 hours",
    description: "Stress hormone produced by adrenal glands. Best measured in morning.",
    sampleType: "Serum",
    fastingRequired: true,
    fastingHours: 10,
    method: "CLIA/ECLIA",
    parameters: [
      { name: "Cortisol (8 AM)", unit: "µg/dL", normalRange: "6-23", paramCode: "CORT" },
    ],
  },
  {
    name: "DHEA-Sulfate",
    code: "DHEAS",
    category: "Hormones",
    price: "900",
    duration: "48 hours",
    description: "Adrenal hormone. Elevated in PCOS and adrenal disorders.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "CLIA/ECLIA",
    parameters: [
      { name: "DHEA-S", unit: "µg/dL", normalRange: "Age and gender dependent", paramCode: "DHEAS" },
    ],
  },
  {
    name: "Parathyroid Hormone (PTH)",
    code: "PTH",
    category: "Hormones",
    price: "1200",
    duration: "48 hours",
    description: "Regulates calcium and phosphorus levels. Important for bone health assessment.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "CLIA/ECLIA",
    parameters: [
      { name: "PTH (Intact)", unit: "pg/mL", normalRange: "15-65", paramCode: "PTH" },
    ],
  },

  // ==================== URINE TESTS ====================
  {
    name: "Urine Routine Examination",
    code: "URINE",
    category: "Urine",
    price: "150",
    duration: "4 hours",
    description: "Complete physical, chemical, and microscopic examination of urine.",
    sampleType: "Urine (Midstream)",
    fastingRequired: false,
    fastingHours: null,
    method: "Dipstick/Microscopy",
    parameters: [
      { name: "Color", unit: "", normalRange: "Pale Yellow to Yellow", paramCode: "UCOL" },
      { name: "Appearance", unit: "", normalRange: "Clear", paramCode: "UAPP" },
      { name: "Specific Gravity", unit: "", normalRange: "1.005-1.030", paramCode: "USG" },
      { name: "pH", unit: "", normalRange: "4.5-8.0", paramCode: "UPH" },
      { name: "Protein", unit: "", normalRange: "Nil", paramCode: "UPROT" },
      { name: "Sugar", unit: "", normalRange: "Nil", paramCode: "USUG" },
      { name: "Ketones", unit: "", normalRange: "Nil", paramCode: "UKET" },
      { name: "Blood", unit: "", normalRange: "Nil", paramCode: "UBLD" },
      { name: "Bilirubin", unit: "", normalRange: "Nil", paramCode: "UBIL" },
      { name: "Urobilinogen", unit: "", normalRange: "Normal", paramCode: "UURO" },
      { name: "RBC", unit: "/hpf", normalRange: "0-2", paramCode: "URBC" },
      { name: "WBC", unit: "/hpf", normalRange: "0-5", paramCode: "UWBC" },
      { name: "Epithelial Cells", unit: "/hpf", normalRange: "Few", paramCode: "UEPI" },
      { name: "Casts", unit: "", normalRange: "Nil", paramCode: "UCAST" },
      { name: "Crystals", unit: "", normalRange: "Nil", paramCode: "UCRYS" },
    ],
  },
  {
    name: "Urine Microalbumin",
    code: "UALB",
    category: "Urine",
    price: "450",
    duration: "24 hours",
    description: "Detects small amounts of albumin in urine. Early marker for kidney damage in diabetics.",
    sampleType: "Urine (Random/24hr)",
    fastingRequired: false,
    fastingHours: null,
    method: "Immunoturbidimetry",
    parameters: [
      { name: "Microalbumin", unit: "mg/L", normalRange: "<20", paramCode: "MALB" },
      { name: "Albumin/Creatinine Ratio", unit: "mg/g", normalRange: "<30", paramCode: "ACR" },
    ],
  },
  {
    name: "24-Hour Urine Protein",
    code: "U24PROT",
    category: "Urine",
    price: "350",
    duration: "24 hours",
    description: "Measures total protein excreted in urine over 24 hours. Important for kidney disease assessment.",
    sampleType: "Urine (24-hour)",
    fastingRequired: false,
    fastingHours: null,
    method: "Colorimetric",
    parameters: [
      { name: "24-Hour Urine Protein", unit: "mg/24hr", normalRange: "<150", paramCode: "U24P" },
    ],
  },
  {
    name: "Urine Culture & Sensitivity",
    code: "UCS",
    category: "Urine",
    price: "650",
    duration: "48-72 hours",
    description: "Identifies bacteria causing urinary tract infection and determines antibiotic sensitivity.",
    sampleType: "Urine (Midstream)",
    fastingRequired: false,
    fastingHours: null,
    method: "Culture",
    parameters: [
      { name: "Colony Count", unit: "CFU/mL", normalRange: "<10,000", paramCode: "UCOL" },
      { name: "Organism Identified", unit: "", normalRange: "No Growth", paramCode: "UORG" },
    ],
  },

  // ==================== STOOL TESTS ====================
  {
    name: "Stool Routine Examination",
    code: "STOOL",
    category: "Stool",
    price: "150",
    duration: "4 hours",
    description: "Microscopic examination of stool for parasites, ova, and other abnormalities.",
    sampleType: "Stool",
    fastingRequired: false,
    fastingHours: null,
    method: "Microscopy",
    parameters: [
      { name: "Color", unit: "", normalRange: "Brown", paramCode: "SCOL" },
      { name: "Consistency", unit: "", normalRange: "Soft", paramCode: "SCON" },
      { name: "Mucus", unit: "", normalRange: "Absent", paramCode: "SMUC" },
      { name: "Blood", unit: "", normalRange: "Absent", paramCode: "SBLD" },
      { name: "Ova/Cysts", unit: "", normalRange: "Not Seen", paramCode: "SOVA" },
      { name: "RBC", unit: "/hpf", normalRange: "Nil", paramCode: "SRBC" },
      { name: "WBC", unit: "/hpf", normalRange: "0-5", paramCode: "SWBC" },
    ],
  },
  {
    name: "Stool Occult Blood",
    code: "FOBT",
    category: "Stool",
    price: "250",
    duration: "4 hours",
    description: "Detects hidden blood in stool. Screening test for colorectal cancer.",
    sampleType: "Stool",
    fastingRequired: false,
    fastingHours: null,
    method: "Immunochromatography",
    parameters: [
      { name: "Occult Blood", unit: "", normalRange: "Negative", paramCode: "FOB" },
    ],
  },

  // ==================== SPECIAL TESTS ====================
  {
    name: "Amylase",
    code: "AMY",
    category: "Special",
    price: "400",
    duration: "24 hours",
    description: "Enzyme for pancreatic function. Elevated in pancreatitis.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "Enzymatic Colorimetric",
    parameters: [
      { name: "Amylase", unit: "U/L", normalRange: "28-100", paramCode: "AMY" },
    ],
  },
  {
    name: "Lipase",
    code: "LIPASE",
    category: "Special",
    price: "500",
    duration: "24 hours",
    description: "More specific marker for pancreatitis than amylase.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "Enzymatic Colorimetric",
    parameters: [
      { name: "Lipase", unit: "U/L", normalRange: "0-60", paramCode: "LIPASE" },
    ],
  },
  {
    name: "LDH (Lactate Dehydrogenase)",
    code: "LDH",
    category: "Special",
    price: "350",
    duration: "24 hours",
    description: "Enzyme present in many tissues. Elevated in tissue damage.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "Enzymatic Kinetic",
    parameters: [
      { name: "LDH", unit: "U/L", normalRange: "140-280", paramCode: "LDH" },
    ],
  },
  {
    name: "CPK (Total Creatine Kinase)",
    code: "CPK",
    category: "Special",
    price: "400",
    duration: "24 hours",
    description: "Enzyme found in muscle. Elevated in muscle damage, heart attack, and muscular disorders.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "Enzymatic Kinetic",
    parameters: [
      { name: "Total CPK", unit: "U/L", normalRange: "30-200 (M), 20-170 (F)", paramCode: "CPK" },
    ],
  },
  {
    name: "PSA (Prostate Specific Antigen)",
    code: "PSA",
    category: "Special",
    price: "900",
    duration: "48 hours",
    description: "Screening test for prostate cancer and monitoring prostate conditions.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "CLIA/ECLIA",
    parameters: [
      { name: "Total PSA", unit: "ng/mL", normalRange: "<4.0", paramCode: "PSA" },
    ],
  },
  {
    name: "Free PSA",
    code: "FPSA",
    category: "Special",
    price: "1200",
    duration: "48 hours",
    description: "Helps differentiate between benign prostate conditions and prostate cancer.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "CLIA/ECLIA",
    parameters: [
      { name: "Free PSA", unit: "ng/mL", normalRange: "N/A", paramCode: "FPSA" },
      { name: "Free/Total PSA Ratio", unit: "%", normalRange: ">25%", paramCode: "FPSARAT" },
    ],
  },
  {
    name: "Beta HCG",
    code: "BHCG",
    category: "Special",
    price: "600",
    duration: "24 hours",
    description: "Pregnancy hormone. Confirms pregnancy and monitors pregnancy progress.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "CLIA/ECLIA",
    parameters: [
      { name: "Beta HCG", unit: "mIU/mL", normalRange: "<5 (Non-pregnant)", paramCode: "BHCG" },
    ],
  },
  {
    name: "AFP (Alpha Fetoprotein)",
    code: "AFP",
    category: "Special",
    price: "800",
    duration: "48 hours",
    description: "Tumor marker for liver cancer and germ cell tumors. Also used in prenatal screening.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "CLIA/ECLIA",
    parameters: [
      { name: "AFP", unit: "ng/mL", normalRange: "<10", paramCode: "AFP" },
    ],
  },
  {
    name: "CA-125",
    code: "CA125",
    category: "Special",
    price: "1100",
    duration: "48 hours",
    description: "Tumor marker primarily used for ovarian cancer monitoring.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "CLIA/ECLIA",
    parameters: [
      { name: "CA-125", unit: "U/mL", normalRange: "<35", paramCode: "CA125" },
    ],
  },
  {
    name: "CEA (Carcinoembryonic Antigen)",
    code: "CEA",
    category: "Special",
    price: "1000",
    duration: "48 hours",
    description: "Tumor marker for colorectal, lung, breast, and other cancers.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "CLIA/ECLIA",
    parameters: [
      { name: "CEA", unit: "ng/mL", normalRange: "<5 (Non-smokers), <10 (Smokers)", paramCode: "CEA" },
    ],
  },
  {
    name: "Vitamin A",
    code: "VITA",
    category: "Vitamins",
    price: "1500",
    duration: "72 hours",
    description: "Measures retinol levels. Important for vision, immunity, and skin health.",
    sampleType: "Serum",
    fastingRequired: true,
    fastingHours: 10,
    method: "HPLC",
    parameters: [
      { name: "Vitamin A (Retinol)", unit: "µg/dL", normalRange: "20-60", paramCode: "VITA" },
    ],
  },
  {
    name: "Vitamin E",
    code: "VITE",
    category: "Vitamins",
    price: "1500",
    duration: "72 hours",
    description: "Measures alpha-tocopherol levels. Important antioxidant.",
    sampleType: "Serum",
    fastingRequired: true,
    fastingHours: 10,
    method: "HPLC",
    parameters: [
      { name: "Vitamin E (Alpha-Tocopherol)", unit: "mg/L", normalRange: "5-20", paramCode: "VITE" },
    ],
  },
  {
    name: "Zinc",
    code: "ZINC",
    category: "Vitamins",
    price: "500",
    duration: "48 hours",
    description: "Essential trace element for immunity, wound healing, and metabolism.",
    sampleType: "Serum",
    fastingRequired: true,
    fastingHours: 10,
    method: "Colorimetric/AAS",
    parameters: [
      { name: "Zinc", unit: "µg/dL", normalRange: "60-120", paramCode: "ZINC" },
    ],
  },
  {
    name: "Copper",
    code: "CU",
    category: "Vitamins",
    price: "500",
    duration: "48 hours",
    description: "Essential trace element for many enzymatic reactions and iron metabolism.",
    sampleType: "Serum",
    fastingRequired: false,
    fastingHours: null,
    method: "Colorimetric/AAS",
    parameters: [
      { name: "Copper", unit: "µg/dL", normalRange: "70-140", paramCode: "CU" },
    ],
  },
];

// Comprehensive Health Packages (Tata 1mg / Practo style)
const seedPackages = [
  // Men's Packages
  {
    name: "Men's Basic Health Checkup",
    category: "men",
    description: "Essential health screening package for men covering basic parameters for overall health assessment.",
    testIds: [], // Will be populated with actual test IDs after seeding tests
    reportTime: "24-48 hours",
    originalPrice: "1800",
    discountPercentage: 40,
    isActive: true,
    imageUrl: null,
    sortOrder: 1,
    includedTestCodes: ["CBC", "BSF", "LIPID", "LFT", "KFT", "THYROID", "URINE"],
  },
  {
    name: "Men's Comprehensive Health Checkup",
    category: "men",
    description: "Complete health evaluation for men including cardiac markers, hormones, and vitamins.",
    testIds: [],
    reportTime: "48-72 hours",
    originalPrice: "4500",
    discountPercentage: 35,
    isActive: true,
    imageUrl: null,
    sortOrder: 2,
    includedTestCodes: ["CBC", "ESR", "BSF", "BSPP", "HBA1C", "LIPID", "LFT", "KFT", "THYROID", "VITD", "VITB12", "FERR", "IRON", "PSA", "TEST", "URINE"],
  },
  {
    name: "Men's Heart Health Package",
    category: "men",
    description: "Comprehensive cardiac assessment for men to evaluate heart disease risk factors.",
    testIds: [],
    reportTime: "24-48 hours",
    originalPrice: "3500",
    discountPercentage: 30,
    isActive: true,
    imageUrl: null,
    sortOrder: 3,
    includedTestCodes: ["CBC", "LIPID", "APOA1", "APOB", "LPA", "HSCRP", "HOMO", "HBA1C", "THYROID"],
  },

  // Women's Packages
  {
    name: "Women's Basic Health Checkup",
    category: "women",
    description: "Essential health screening package for women covering basic parameters for overall health assessment.",
    testIds: [],
    reportTime: "24-48 hours",
    originalPrice: "2000",
    discountPercentage: 40,
    isActive: true,
    imageUrl: null,
    sortOrder: 4,
    includedTestCodes: ["CBC", "BSF", "LIPID", "LFT", "KFT", "THYROID", "IRON", "URINE"],
  },
  {
    name: "Women's Comprehensive Health Checkup",
    category: "women",
    description: "Complete health evaluation for women including hormones, vitamins, and essential markers.",
    testIds: [],
    reportTime: "48-72 hours",
    originalPrice: "5000",
    discountPercentage: 35,
    isActive: true,
    imageUrl: null,
    sortOrder: 5,
    includedTestCodes: ["CBC", "ESR", "BSF", "BSPP", "HBA1C", "LIPID", "LFT", "KFT", "THYROID", "FT3", "FT4", "TPO", "VITD", "VITB12", "FERR", "IRON", "FOLATE", "CA", "URINE"],
  },
  {
    name: "Women's Hormone Panel",
    category: "women",
    description: "Complete hormonal assessment for women to evaluate reproductive health and hormonal balance.",
    testIds: [],
    reportTime: "48-72 hours",
    originalPrice: "4000",
    discountPercentage: 25,
    isActive: true,
    imageUrl: null,
    sortOrder: 6,
    includedTestCodes: ["THYROID", "FT3", "FT4", "FSH", "LH", "E2", "PROG", "PRL", "TEST", "DHEAS"],
  },
  {
    name: "PCOD/PCOS Profile",
    category: "women",
    description: "Specialized package for detecting and monitoring Polycystic Ovarian Syndrome.",
    testIds: [],
    reportTime: "48-72 hours",
    originalPrice: "3500",
    discountPercentage: 30,
    isActive: true,
    imageUrl: null,
    sortOrder: 7,
    includedTestCodes: ["THYROID", "FSH", "LH", "TEST", "DHEAS", "FINS", "BSF", "HBA1C", "LIPID"],
  },

  // Young/General Packages
  {
    name: "Young Adult Health Checkup",
    category: "general",
    description: "Basic health screening package for young adults aged 18-35 years.",
    testIds: [],
    reportTime: "24-48 hours",
    originalPrice: "1500",
    discountPercentage: 45,
    isActive: true,
    imageUrl: null,
    sortOrder: 8,
    includedTestCodes: ["CBC", "BSF", "LIPID", "THYROID", "VITD", "URINE"],
  },
  {
    name: "Full Body Checkup Basic",
    category: "general",
    description: "Complete body health screening covering all major organ systems.",
    testIds: [],
    reportTime: "24-48 hours",
    originalPrice: "2500",
    discountPercentage: 40,
    isActive: true,
    imageUrl: null,
    sortOrder: 9,
    includedTestCodes: ["CBC", "ESR", "BSF", "BSPP", "LIPID", "LFT", "KFT", "THYROID", "URINE"],
  },
  {
    name: "Full Body Checkup Advanced",
    category: "general",
    description: "Comprehensive health assessment with advanced markers and vitamins.",
    testIds: [],
    reportTime: "48-72 hours",
    originalPrice: "5500",
    discountPercentage: 35,
    isActive: true,
    imageUrl: null,
    sortOrder: 10,
    includedTestCodes: ["CBC", "ESR", "PBS", "BSF", "BSPP", "HBA1C", "LIPID", "LFT", "KFT", "ELEC", "THYROID", "FT3", "FT4", "VITD", "VITB12", "FERR", "IRON", "CA", "URINE"],
  },
  {
    name: "Vitamin & Mineral Panel",
    category: "general",
    description: "Complete vitamin and mineral assessment for nutritional status evaluation.",
    testIds: [],
    reportTime: "48-72 hours",
    originalPrice: "3500",
    discountPercentage: 30,
    isActive: true,
    imageUrl: null,
    sortOrder: 11,
    includedTestCodes: ["VITD", "VITB12", "FOLATE", "FERR", "IRON", "CA", "PHOS", "MG", "ZINC"],
  },

  // Senior Citizen Packages
  {
    name: "Senior Citizen Basic Checkup",
    category: "senior",
    description: "Essential health screening package for adults above 60 years.",
    testIds: [],
    reportTime: "24-48 hours",
    originalPrice: "2500",
    discountPercentage: 40,
    isActive: true,
    imageUrl: null,
    sortOrder: 12,
    includedTestCodes: ["CBC", "ESR", "BSF", "BSPP", "HBA1C", "LIPID", "LFT", "KFT", "THYROID", "URINE"],
  },
  {
    name: "Senior Citizen Comprehensive Checkup",
    category: "senior",
    description: "Complete health evaluation for seniors including cardiac markers and bone health.",
    testIds: [],
    reportTime: "48-72 hours",
    originalPrice: "6000",
    discountPercentage: 35,
    isActive: true,
    imageUrl: null,
    sortOrder: 13,
    includedTestCodes: ["CBC", "ESR", "PBS", "BSF", "BSPP", "HBA1C", "LIPID", "LFT", "KFT", "ELEC", "THYROID", "FT3", "FT4", "VITD", "VITB12", "FERR", "IRON", "CA", "PHOS", "PTH", "PSA", "HSCRP", "URINE"],
  },
  {
    name: "Diabetes Care Package",
    category: "senior",
    description: "Complete diabetes monitoring and complication screening package.",
    testIds: [],
    reportTime: "24-48 hours",
    originalPrice: "2800",
    discountPercentage: 30,
    isActive: true,
    imageUrl: null,
    sortOrder: 14,
    includedTestCodes: ["BSF", "BSPP", "HBA1C", "FINS", "KFT", "LIPID", "UALB", "URINE"],
  },
  {
    name: "Bone Health Package",
    category: "senior",
    description: "Complete bone health assessment including calcium, vitamin D, and bone markers.",
    testIds: [],
    reportTime: "48-72 hours",
    originalPrice: "3000",
    discountPercentage: 25,
    isActive: true,
    imageUrl: null,
    sortOrder: 15,
    includedTestCodes: ["VITD", "CA", "PHOS", "ALP", "PTH", "MG"],
  },

  // Fever/Infection Packages
  {
    name: "Fever Profile",
    category: "general",
    description: "Complete evaluation for fever including common tropical infections.",
    testIds: [],
    reportTime: "24 hours",
    originalPrice: "2000",
    discountPercentage: 35,
    isActive: true,
    imageUrl: null,
    sortOrder: 16,
    includedTestCodes: ["CBC", "ESR", "CRP", "MALARIA", "DENNS1", "DENIGG", "TYPHOID", "WIDAL", "URINE"],
  },
  {
    name: "Monsoon Fever Package",
    category: "general",
    description: "Screening for common monsoon-related infections including dengue, malaria, and typhoid.",
    testIds: [],
    reportTime: "24 hours",
    originalPrice: "1800",
    discountPercentage: 40,
    isActive: true,
    imageUrl: null,
    sortOrder: 17,
    includedTestCodes: ["CBC", "MALARIA", "DENNS1", "DENIGG", "TYPHOID"],
  },
];

async function ensureTablesExist() {
  try {
    const tableQueries = [
      `CREATE TABLE IF NOT EXISTS patients (
        id VARCHAR(36) PRIMARY KEY DEFAULT gen_random_uuid(),
        patient_id VARCHAR(50) UNIQUE NOT NULL,
        name TEXT NOT NULL,
        email TEXT,
        phone TEXT NOT NULL,
        dob TIMESTAMP,
        gender VARCHAR(20),
        address TEXT,
        password TEXT,
        firebase_uid TEXT,
        email_verified BOOLEAN DEFAULT FALSE,
        notes TEXT,
        profile_photo TEXT,
        created_at TIMESTAMP DEFAULT NOW()
      )`,
      `CREATE TABLE IF NOT EXISTS tests (
        id VARCHAR(36) PRIMARY KEY DEFAULT gen_random_uuid(),
        name TEXT NOT NULL,
        code VARCHAR(50) UNIQUE NOT NULL,
        category VARCHAR(100) NOT NULL,
        price DECIMAL(10,2) NOT NULL,
        duration VARCHAR(50) NOT NULL,
        description TEXT,
        parameters JSONB NOT NULL,
        image_url TEXT
      )`,
      `CREATE TABLE IF NOT EXISTS health_packages (
        id VARCHAR(36) PRIMARY KEY DEFAULT gen_random_uuid(),
        name TEXT NOT NULL,
        category VARCHAR(50) NOT NULL,
        description TEXT,
        test_ids JSONB NOT NULL,
        report_time VARCHAR(50) NOT NULL,
        original_price DECIMAL(10,2) NOT NULL,
        discount_percentage INTEGER DEFAULT 0,
        is_active BOOLEAN DEFAULT TRUE,
        image_url TEXT,
        sort_order INTEGER DEFAULT 0,
        created_at TIMESTAMP DEFAULT NOW()
      )`,
      `CREATE TABLE IF NOT EXISTS bookings (
        id VARCHAR(36) PRIMARY KEY DEFAULT gen_random_uuid(),
        patient_id VARCHAR(36) REFERENCES patients(id),
        guest_name TEXT,
        phone TEXT NOT NULL,
        email TEXT,
        test_ids JSONB NOT NULL,
        health_package_id VARCHAR(36) REFERENCES health_packages(id),
        type VARCHAR(20) NOT NULL,
        slot TIMESTAMP NOT NULL,
        status VARCHAR(30) DEFAULT 'pending',
        test_report_status JSONB,
        payment_method VARCHAR(50),
        payment_status VARCHAR(50) DEFAULT 'pending',
        transaction_id TEXT,
        razorpay_order_id TEXT,
        razorpay_payment_id TEXT,
        payment_screenshot TEXT,
        amount_paid DECIMAL(10,2),
        discount_amount DECIMAL(10,2),
        payment_date TIMESTAMP,
        payment_verified_at TIMESTAMP,
        payment_verified_by VARCHAR(36),
        user_latitude DECIMAL(10,7),
        user_longitude DECIMAL(10,7),
        distance_from_lab DECIMAL(10,2),
        collection_address TEXT,
        prescription_path TEXT,
        created_at TIMESTAMP DEFAULT NOW()
      )`,
      `CREATE TABLE IF NOT EXISTS reports (
        id VARCHAR(36) PRIMARY KEY DEFAULT gen_random_uuid(),
        patient_id VARCHAR(36) NOT NULL REFERENCES patients(id),
        result_id VARCHAR(36) NOT NULL,
        booking_id VARCHAR(36) REFERENCES bookings(id),
        pdf_path TEXT,
        secure_download_token TEXT UNIQUE NOT NULL,
        generated_at TIMESTAMP DEFAULT NOW()
      )`,
      `CREATE TABLE IF NOT EXISTS prescriptions (
        id VARCHAR(36) PRIMARY KEY DEFAULT gen_random_uuid(),
        patient_id VARCHAR(36) NOT NULL REFERENCES patients(id),
        booking_id VARCHAR(36) REFERENCES bookings(id),
        file_name TEXT NOT NULL,
        file_path TEXT NOT NULL,
        file_type VARCHAR(50) NOT NULL,
        file_size INTEGER,
        notes TEXT,
        uploaded_at TIMESTAMP DEFAULT NOW()
      )`,
      `CREATE TABLE IF NOT EXISTS admins (
        id VARCHAR(36) PRIMARY KEY DEFAULT gen_random_uuid(),
        username TEXT UNIQUE NOT NULL,
        password TEXT NOT NULL,
        name TEXT NOT NULL,
        role VARCHAR(30) DEFAULT 'technician',
        created_at TIMESTAMP DEFAULT NOW()
      )`,
      `CREATE TABLE IF NOT EXISTS otps (
        id VARCHAR(36) PRIMARY KEY DEFAULT gen_random_uuid(),
        contact TEXT NOT NULL,
        otp VARCHAR(6) NOT NULL,
        purpose VARCHAR(30) NOT NULL,
        attempts INTEGER DEFAULT 0,
        created_at TIMESTAMP DEFAULT NOW(),
        expires_at TIMESTAMP NOT NULL
      )`,
      `CREATE TABLE IF NOT EXISTS reviews (
        id VARCHAR(36) PRIMARY KEY DEFAULT gen_random_uuid(),
        name TEXT NOT NULL,
        location TEXT NOT NULL,
        rating INTEGER NOT NULL,
        review TEXT NOT NULL,
        is_approved BOOLEAN DEFAULT FALSE,
        created_at TIMESTAMP DEFAULT NOW()
      )`,
      `CREATE TABLE IF NOT EXISTS advertisements (
        id VARCHAR(36) PRIMARY KEY DEFAULT gen_random_uuid(),
        title TEXT NOT NULL,
        subtitle TEXT NOT NULL,
        description TEXT NOT NULL,
        gradient VARCHAR(100) NOT NULL,
        icon VARCHAR(50) NOT NULL,
        image_url TEXT,
        cta_text TEXT NOT NULL,
        cta_link TEXT NOT NULL,
        is_active BOOLEAN DEFAULT TRUE,
        sort_order INTEGER DEFAULT 0,
        created_at TIMESTAMP DEFAULT NOW()
      )`,
      `CREATE TABLE IF NOT EXISTS lab_settings (
        id VARCHAR(36) PRIMARY KEY DEFAULT gen_random_uuid(),
        lab_name TEXT NOT NULL,
        lab_latitude DECIMAL(10,7) NOT NULL,
        lab_longitude DECIMAL(10,7) NOT NULL,
        max_collection_distance INTEGER DEFAULT 40,
        address TEXT,
        phone TEXT,
        email TEXT,
        updated_at TIMESTAMP DEFAULT NOW()
      )`,
      `CREATE TABLE IF NOT EXISTS walkin_collections (
        id VARCHAR(36) PRIMARY KEY DEFAULT gen_random_uuid(),
        patient_id VARCHAR(36) NOT NULL REFERENCES patients(id),
        doctor_name TEXT,
        doctor_clinic TEXT,
        test_ids JSONB NOT NULL,
        test_report_status JSONB,
        status VARCHAR(30) DEFAULT 'pending',
        collected_at TIMESTAMP DEFAULT NOW(),
        notes TEXT,
        created_at TIMESTAMP DEFAULT NOW()
      )`,
      `CREATE TABLE IF NOT EXISTS notifications (
        id VARCHAR(36) PRIMARY KEY DEFAULT gen_random_uuid(),
        type VARCHAR(50) NOT NULL,
        title TEXT NOT NULL,
        message TEXT NOT NULL,
        recipient_type VARCHAR(20) NOT NULL,
        patient_id VARCHAR(36) REFERENCES patients(id),
        admin_id VARCHAR(36) REFERENCES admins(id),
        booking_id VARCHAR(36) REFERENCES bookings(id),
        report_id VARCHAR(36) REFERENCES reports(id),
        metadata JSONB,
        is_read BOOLEAN DEFAULT FALSE,
        read_at TIMESTAMP,
        created_at TIMESTAMP DEFAULT NOW()
      )`,
      `CREATE TABLE IF NOT EXISTS results (
        id VARCHAR(36) PRIMARY KEY DEFAULT gen_random_uuid(),
        patient_id VARCHAR(36) NOT NULL REFERENCES patients(id),
        test_id VARCHAR(36) NOT NULL REFERENCES tests(id),
        parameter_results JSONB NOT NULL,
        technician TEXT NOT NULL,
        referred_by TEXT,
        collected_at TIMESTAMP NOT NULL,
        created_at TIMESTAMP DEFAULT NOW()
      )`
    ];

    for (const query of tableQueries) {
      try {
        await db.execute(db.raw(query));
      } catch (err: any) {
        if (!err.message?.includes('already exists')) {
          console.log(`Note: Table operation: ${err.message?.substring(0, 50)}`);
        }
      }
    }

    console.log('✅ Database tables ensured');
  } catch (err) {
    console.error('Error ensuring tables exist:', err);
  }
}

export async function seedDatabase() {
  try {
    await ensureTablesExist();
    console.log("Seeding database...");

    // Check if tests exist
    const existingTests = await db.select().from(tests).limit(1);
    if (existingTests.length === 0) {
      console.log("Seeding tests...");
      // Remove the extra fields that aren't in the schema before inserting
      const testsToInsert = seedTests.map(({ sampleType, fastingRequired, fastingHours, method, ...rest }) => ({
        ...rest,
        // Store additional info in description if needed
        description: `${rest.description}\n\nSample Type: ${sampleType}\nFasting: ${fastingRequired ? `Yes (${fastingHours} hours)` : 'No'}\nMethod: ${method}`,
      }));
      await db.insert(tests).values(testsToInsert);
      console.log(`Inserted ${seedTests.length} tests`);
    } else {
      console.log("Tests already exist, skipping seed");
    }

    // Get all tests to map codes to IDs for packages
    const allTests = await db.select().from(tests);
    const testCodeToId = new Map(allTests.map(t => [t.code, t.id]));

    // Check if health packages exist
    const existingPackages = await db.select().from(healthPackages).limit(1);
    if (existingPackages.length === 0) {
      console.log("Seeding health packages...");
      const packagesToInsert = seedPackages.map(({ includedTestCodes, ...pkg }) => ({
        ...pkg,
        testIds: includedTestCodes.map(code => testCodeToId.get(code)).filter(Boolean) as string[],
      }));
      await db.insert(healthPackages).values(packagesToInsert);
      console.log(`Inserted ${seedPackages.length} health packages`);
    } else {
      console.log("Health packages already exist, skipping seed");
    }

    // Create default admin
    const existingAdmin = await db.select().from(admins).limit(1);
    if (existingAdmin.length === 0) {
      console.log("Creating default admin...");
      const hashedPassword = await bcrypt.hash("admin123", 10);
      await db.insert(admins).values({
        username: "admin",
        password: hashedPassword,
        name: "Admin User",
        role: "admin",
      });
      console.log("Created admin user (username: admin, password: admin123)");
    } else {
      console.log("Admin already exists, skipping");
    }

    console.log("Database seeding complete!");
  } catch (error) {
    console.error("Error seeding database:", error);
  }
}
